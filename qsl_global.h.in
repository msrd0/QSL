#pragma once

/// @file qsl_global.h This file should be included by every qsl header file. It defines
/// some basics like the version of qsl.

#include <sys/types.h>

#include <QtGlobal>

#if (QT_VERSION < QT_VERSION_CHECK(5,5,0))
#  error At least Qt 5.5 is required
#endif

#define QSL_MAJOR @QSL_MAJOR@
#define QSL_MINOR @QSL_MINOR@
#define QSL_PATCH @QSL_PATCH@
#define QSL_VERSION ((@QSL_MAJOR@ << 16) | (@QSL_MINOR@ << 8) | @QSL_PATCH@)
#define QSL_VERSION_STR "@QSL_MAJOR@.@QSL_MINOR@.@QSL_PATCH@"

#if defined _WIN32 || defined __CYGWIN__
#  ifdef CMAKE_QSL_SO
#    ifdef __GNUC__
#      define QSL_PUBLIC __attribute__((dllexport))
#    else // __GNUC__
#      define QSL_PUBLIC __declspec(dllexport)
#    endif // __GNUC__
#  else // CMAKE_QSL_SO
#    ifdef __GNUC__
#      define QSL_PUBLIC __attribute__((dllimport))
#    else // __GNUC__
#      define QSL_PUBLIC __declspec(dllimport)
#    endif // __GNUC__
#  endif
#  define QSL_PRIVATE
#elif defined __GNUC__ && __GNUC__ >= 4
#  define QSL_PUBLIC __attribute__((visibility("default")))
#  define QSL_PRIVATE __attribute__((visibility("hidden")))
#else
#  define QSL_PUBLIC
#  define QSL_PRIVATE
#endif

#if __STDC_VERSION__ >= 201500L
#  define QSL_MAYBE_UNUSED [[maybe_unused]]
#elif defined __GNUC__ && !defined __clang__
#  define QSL_MAYBE_UNUSED __attribute__((unused))
#else
#  define QSL_MAYBE_UNUSED
#endif
